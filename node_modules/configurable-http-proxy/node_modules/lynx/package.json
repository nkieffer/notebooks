{
  "name": "lynx",
  "description": "Minimalistic StatsD client for Node.js programs",
  "version": "0.2.0",
  "author": {
    "name": "Lloyd Hilaiel"
  },
  "contributors": [
    {
      "name": "Nuno Job",
      "email": "nunojobpinto@gmail.com",
      "url": "http://nunojob.com"
    },
    {
      "name": "Mark Bogdanoff",
      "url": "https://github.com/bog"
    }
  ],
  "scripts": {
    "test": "tap tests/*-test.js"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/dscape/lynx.git"
  },
  "bugs": {
    "url": "https://github.com/dscape/lynx/issues"
  },
  "directories": {
    "lib": "./lib/"
  },
  "main": "./lib/lynx",
  "keywords": [
    "stats",
    "metrics",
    "metricsd",
    "statsd",
    "etsy",
    "statsd client",
    "statsd driver",
    "graphite"
  ],
  "devDependencies": {
    "tap": "~0.3.2"
  },
  "dependencies": {
    "mersenne": "~0.0.3",
    "statsd-parser": "~0.0.4"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "http://github.com/dscape/lynx/raw/master/LICENSE"
    }
  ],
  "readme": "# lynx\n\n![NPM Downloads](http://img.shields.io/npm/dm/lynx.svg?style=flat) ![NPM Version](http://img.shields.io/npm/v/lynx.svg?style=flat)\n\nA minimalistic node.js client for [statsd] server. Fork of original work by [sivy]\n\n`lynx` features:\n\n* **Minimalistic** — there is only a minimum of abstraction between you and \n  statsd\n* **Streams** — You can stream in and out of a `lynx` connection\n* **Re-usable UDP Connections** — Keeps UDP connections open for a certain time\n* **Errors** — Pluggable error handling, by default errors are ignored\n\n## Quick Start\n\n```\n$ npm install lynx\n$ node\n> var lynx = require('lynx');\n//\n// Options in this instantiation include:\n//   * `on_error` function to be executed when we have errors\n//   * `socket` if you wish to just use a existing udp socket\n//   * `scope` to define the a prefix for all stats, e.g. with `scope`\n//     'product1' and stat 'somestat' the key would actually be\n//     'product1.somestat'\n//\n> var metrics = new lynx('localhost', 8125);\n{ host: 'localhost', port: 8125 }\n> metrics.increment('node_test.int');\n> metrics.decrement('node_test.int');\n> metrics.timing('node_test.some_service.task.time', 500); // time in ms\n> metrics.gauge('gauge.one', 100);\n> metrics.set('set.one', 10);\n```\n\nThis is the equivalent to:\n\n``` sh\necho \"node_test.int:1|c\"  | nc -w 0 -u localhost 8125\necho \"node_test.int:-1|c\" | nc -w 0 -u localhost 8125\necho \"node_test.some_service.task.time:500|ms\" | nc -w 0 -u localhost 8125\necho \"gauge.one:100|g\"    | nc -w 0 -u localhost 8125\necho \"set.one:10|s\"       | nc -w 0 -u localhost 8125\n```\n\nThe protocol is super simple, so feel free to check out the source code to understand how everything works.\n\n## Advanced\n\n### Sampling\n\nIf you want to track something that happens really, really frequently, it can overwhelm StatsD with UDP packets.  To work around that, use the optional sampling rate for metrics.  This will only send packets a certain percentage of time.  For very frequent events, this will give you a statistically accurate representation of your data.\n\nSample rate is an optional parameter to all of the metric API calls.  A valid sample rate is 0.0 - 1.0.  Values of 0.0 will never send any packets, and values of 1.0 will send every packet.  \n\nIn these examples we are samping at a rate of 0.1, meaning 1-in-10 calls to send a sample will actually be sent to StatsD.\n\n```\nvar metrics = new lynx('localhost', 8125);\nmetrics.increment('node_test.int', 0.1);\nmetrics.decrement('node_test.int', 0.1);\nmetrics.timing('node_test.some_service.task.time', 500, 0.1);\nmetrics.gauge('gauge.one', 100, 0.1);\nmetrics.set('set.one', 10, 0.1);\nvar timer2 = metrics.createTimer('node_test.some_service.task2.time', 0.1);\ntimer2.stop();\n```\n\n### Streams\n\nYou can stream to `lynx`:\n\n``` js\nfs.createReadStream('file.statsd')\n  .pipe(new lynx('localhost', port))\n  .pipe(fs.createReadStream('file-fixed.statsd'))\n  ;\n```\n\nFeel free to check the `stream-test` for more info.\n\n### Timers\n\nIf you wish to measure timing you can use the `timer()` functionality.\n\n``` js\nvar metrics = new lynx('localhost', 8125)\n  , timer   = metrics.createTimer('some.interval')\n  ;\n\n//\n// Should send something like \"some.interval:100|ms\"\n//\nsetTimeout(function () {\n  timer.stop();\n}, 100);\n```\n\nTimers use `Date.getTime()` which is known for being imprecise at the ms level. If this is a problem to you please submit a pull request and I'll take it.\n\n### Batching\n\nBatching is possible for `increment`, `decrement`, and count:\n\n``` js\nmetrics.decrement(['uno', 'two', 'trezentos']);\n```\n\nIf you want to mix more than one type of metrics in a single packet you can use `send`, however you need to construct the values yourself. An example:\n\n``` js\n//\n// This code is only to exemplify the functionality\n//\n// As of the current implementation the sample rate is processed per group\n// of stats and not per individual stat, meaning either all would be send\n// or none would be sent.\n//\nmetrics.send(\n  { \"foo\" : \"-1|c\"    // count\n  , \"bar\" : \"15|g\"    // gauge\n  , \"baz\" : \"500|ms\"  // timing\n  , \"boaz\": \"40|s\"    // set\n  }, 0.1);            // sample rate at `0.1`\n```\n\n### Closing your socket\n\nYou can close your open socket when you no longer need it by using `metrics.close()`.\n\n### Errors\n\nBy default `errors` get logged. If you wish to change this behavior simply specify a `on_error` function when instantiating the `lynx` client.\n\n``` js\nfunction on_error(err) {\n  console.log(err.message);\n}\n\nvar connection = new lynx('localhost', 1234, {on_error: on_error});\n```\n\nSource code is super minimal, if you want try to get familiar with when errors occur check it out. If you would like to change behavior on how this is handled send a pull request justifying why and including the alterations you would like to propose.\n\n## Tests\n\nRun the tests with `npm`.\n\n``` sh\nnpm test\n```\n\n## Meta\n\n           `\\.      ,/'\n            |\\\\____//|\n            )/_ `' _\\(\n           ,'/-`__'-\\`\\\n           /. (_><_) ,\\\n           ` )/`--'\\(`'  atc\n             `      '\n\n* travis: [![build status](https://secure.travis-ci.org/dscape/lynx.png)](http://travis-ci.org/dscape/lynx)\n* code: `git clone git://github.com/dscape/lynx.git`\n* home: <http://github.com/dscape/lynx>\n* bugs: <http://github.com/dscape/lynx/issues>\n\n`(oo)--',-` in [caos]\n\n[caos]: http://caos.di.uminho.pt\n[sivy]: https://github.com/sivy/node-statsd\n[statsd]: https://github.com/etsy/statsd\n",
  "readmeFilename": "README.md",
  "_id": "lynx@0.2.0",
  "_from": "lynx@^0.2.0"
}
